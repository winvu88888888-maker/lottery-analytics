<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Data Loading</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }

        .status {
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            background: #2a2a2a;
        }

        .success {
            border-left: 4px solid #10b981;
        }

        .error {
            border-left: 4px solid #ef4444;
        }

        .info {
            border-left: 4px solid #3b82f6;
        }

        pre {
            background: #000;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
        }
    </style>
</head>

<body>
    <h1>üîç Test T·∫£i D·ªØ Li·ªáu</h1>
    <div id="status"></div>
    <div id="data"></div>

    <script>
        const statusDiv = document.getElementById('status');
        const dataDiv = document.getElementById('data');

        async function testLoadData() {
            try {
                statusDiv.innerHTML = '<div class="status info">‚è≥ ƒêang t·∫£i d·ªØ li·ªáu...</div>';

                const response = await fetch('db_storage.json');

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const rawData = await response.json();

                statusDiv.innerHTML = `
                    <div class="status success">
                        ‚úÖ T·∫£i d·ªØ li·ªáu th√†nh c√¥ng!<br>
                        üìä Mega: ${rawData.mega ? rawData.mega.length : 0} k·ª≥<br>
                        ‚ö° Power: ${rawData.power ? rawData.power.length : 0} k·ª≥
                    </div>
                `;

                // Hi·ªÉn th·ªã m·∫´u d·ªØ li·ªáu
                if (rawData.mega && rawData.mega.length > 0) {
                    const sample = rawData.mega[rawData.mega.length - 1];
                    dataDiv.innerHTML = `
                        <h2>üìã D·ªØ li·ªáu m·∫´u (K·ª≥ cu·ªëi Mega):</h2>
                        <pre>${JSON.stringify(sample, null, 2)}</pre>
                        
                        <h2>üéØ Ki·ªÉm tra format:</h2>
                        <ul>
                            <li>Ng√†y: ${sample.date}</li>
                            <li>S·ªë: ${sample.numbers ? sample.numbers.join(', ') : 'N/A'}</li>
                            <li>Jackpot: ${sample.jackpot ? sample.jackpot.toLocaleString('vi-VN') + ' ‚Ç´' : 'N/A'}</li>
                            <li>Type of numbers[0]: ${typeof sample.numbers[0]}</li>
                        </ul>
                    `;
                } else {
                    dataDiv.innerHTML = '<div class="status error">‚ùå Kh√¥ng c√≥ d·ªØ li·ªáu Mega</div>';
                }

            } catch (error) {
                statusDiv.innerHTML = `
                    <div class="status error">
                        ‚ùå L·ªói t·∫£i d·ªØ li·ªáu:<br>
                        ${error.message}<br><br>
                        <strong>Chi ti·∫øt:</strong><br>
                        ${error.stack}
                    </div>
                `;
                console.error('Error:', error);
            }
        }

        // T·ª± ƒë·ªông ch·∫°y khi trang load
        testLoadData();
    </script>
</body>

</html>